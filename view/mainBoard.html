<include href="view/header.html"/>
<script src="assets/audiosynth.js"></script>
<div class="container">
		<div class="row">
			<repeat group="{{@firstOctave}}" key="{{ @noteID }}" value="{{ @note }}">
			<div class="col-sm-1" style="margin: 0px 0px 0px 0px;">
				<check if='{{ substr(@note, -1) == "#"}}'> <!--If the key is sharp -->
					<true>
						<button type="button" class="btn btn-dark" style=" width: 100%; margin: 0px 0px 0px 0px;"
								name="{{ @currentOctave }}" value="{{ @note }}" id = "{{@noteID}}"><p>{{@note}}</p><p>{{@noteID}}</p>
						</button>
					</true>
					<false>
						<button type="button" class="btn btn-light" style=" width: 100%; margin: 0px 0px 0px 0px;"
								name="{{ @currentOctave }}" value="{{ @note }}" id = "{{@noteID}}"><p>{{@note}}</p><p>{{@noteID}}</p>
						</button>
					</false>
				</check>
			</div>
		</repeat>
		</div>
	<div class="row">
		<repeat group="{{@secondOctave}}" key="{{ @noteID }}" value="{{ @note }}">
			<div class="col-sm-1" style="margin: 0px 0px 0px 0px;">
				<check if='{{ substr(@note, -1) == "#"}}'> <!--If the key is sharp -->
					<true>
						<button type="button" class="btn btn-dark" style=" width: 100%; margin: 0px 0px 0px 0px;"
								name="{{ @currentOctave +1 }}" value="{{ @note }}" id = "{{@noteID}}"><p>{{@note}}</p><p>{{@noteID}}</p>
						</button>
					</true>
					<false>
						<button type="button" class="btn btn-light" style=" width: 100%; margin: 0px 0px 0px 0px;"
								name="{{ @currentOctave +1 }}" value="{{ @note }}" id = "{{@noteID}}"><p>{{@note}}</p><p>{{@noteID}}</p>
						</button>
					</false>
				</check>
			</div>
		</repeat>
	</div>

</div>
<script type="text/javascript">
    var piano = Synth.createInstrument('piano');
    var octave = {{@currentOctave}};

    $("button").mousedown(function () {
        var playedOctave = octave;
		if(!($(this).attr('name') == octave)){
		    playedOctave+=1;
		}
        var className = $(this).attr('class');
	    piano.play($(this).attr('value'), playedOctave);
        $(this).removeClass(className);
        $(this).addClass("btn btn-success");

    });

    $(document).keydown(function (event) {
        var key = String.fromCharCode(event.keyCode);
        if(isNaN(key)){
            key = String.fromCharCode(event.keyCode + 32);
        }

        $("#"+key).mousedown();


    });

    $(document).keypress(function (event) {
        var key = String.fromCharCode(event.keyCode);

        if(key == '-' && octave > 1){
            octave-=1;
        }
        else if (key == '+' && octave < 7){
            octave++;
        }
    });

    $(document).keyup(function (event) {
        var key = String.fromCharCode(event.keyCode);
        if(isNaN(key)){
            key = String.fromCharCode(event.keyCode + 32);
		}
        $("#"+key).mouseup();


    });

    $("button").mouseup(function (event) {
        var className;
        if($(this).val().length == 2){
            className = 'btn btn-dark';
		} else {
            className = 'btn btn-light';
		}

        $(this).removeClass("btn btn-success");
        $(this).addClass(className);
    });

</script>
<include href="view/footer.html"/>